---
layout: post
title: "Performance"
date: 2023-08-26
category: AWS
excerpt: ""
---
# パフォーマンス効率
## 早引き
- S3はSNSを介せず、直接Lambda関数を呼び出すことができる
- JSONのデータをそのままテーブルのアイテムとして保存 -> DynamoDB(KVS型のDBなので親和性が高い)
- SQSキューを使用しなくてもLambdaには自動スケーリング機能があるので、相当の負荷にも耐えられるようになっている（1秒間に同時に実行できる関数の数はデフォルトで1000）
  - 処理にタイムアウトが発生するなどでなければ、SQSを使用せずにS3イベント通知からLambda関数を実行する方がシンプルで効果的な構成
- 実はEC2インスタンスストアが最もI/O性能が高い


## S3
### S3イベント通知
- S3バケットに発生したイベント（オブジェクトの作成や削除など）をトリガーに通知を行う機能
- 通知先：Lambda関数、SQSキュー、SNSトピック
- 
### ストレージクラス
| ストレージクラス | 説明 |
| --- | --- |
| S3 Standard(S3 標準） | デフォルトで選択されるストレージクラスです。<br>保存したデータに無料・低遅延でアクセスができるので、アクセス頻度が高いデータに適しています。 |
| S3 Standard-Infrequent Access(S3 標準 - 低頻度アクセス） | 保存料金がS3 Standardより低価格ですが、データ取り出し料金がかかります。<br>アクセス頻度は低くても、アクセス時には低遅延が求められるデータに適しています。 |
| S3 One Zone-Infrequent Access(S3 1ゾーン - 低頻度アクセス） | 保存料金がS3 Standard-IAより低価格ですが、保存したデータは1ヵ所のAZに保存されます。<br>AZ障害が発生した場合、保存したデータへのアクセス不能やデータ消失の可能性があるため、リスクよりも低コストであることが優先されるデータに推奨されます。 |
| S3 Intelligent-Tiering | 実際の利用状況に応じて「高頻度アクセス用ストレージ」か「低頻度アクセス用ストレージ」ヘデータを自動的に移します。<br>取り出し料金はかかりませんが、黙視とデータ移動の自動化に対する月額利用料がかかります。<br>アクセス頻度が変動するなど予測が難しいデータに適しています。 |
| S3 Glacier | 大量のデータを低価格で保存できるアーカイブデータ向けストレージです。<br>データ取り出し時に数分～数時間の遅延と取り出し料金がかかります。<br>アクセス頻度が低く、取り出し時に遅延が発生しても問題ないデータに適しています。 |
| S3 Glacier Deep Archive | S3ストレージクラスの中で最もデータ保存料金が低価格のアーカイプデータ向けストレージです。<br>データの取り出しにS3 Glacierより長い運延と高い取り出し料金がかかります。<br>アクセスがほとんどないデータを長期にわたって保存する場合に適しています。 |

![kk58406](https://github.com/IzmYuta/TIL/assets/104307371/3f3ce706-095d-476b-ab3f-3307049c8a6b)

## lambda関数

## ストレージサービス
### Amazon EFS
- NFS（Network File System）プロトコルをサポートするファイルストレージサービス
- EFSはNFSに対応したAWSサービスおよびオンプレミス（自社運用）のシステムから利用可能
- 複数のEC2インスタンスでストレージを共用したい時にも使える

### Amazon EBS
- EBS（Elastic Block Store）はEC2インスタンスに割り当てられるブロックストレージで、物理ハードディスクドライブと同じように利用できる
- EBSは必要に応じて複数作成し、EC2インスタンスにアタッチ（取り付け）して利用する
- EC2とEBSは1対１の関係。共用はできない。

### EC2インスタンスストア
- インスタンスストアは、EC2インスタンスから利用できる揮発性の（インスタンス稼働中にだけ利用可能な）ブロックストレージ
- インスタンスストアは、EBSよりも高いパフォーマンスを発揮できるという特徴がある
  - EBS：最も高性能なボリュームタイプでも64,000IOPS
  - インスタンスストア：数百万IOPS
  - IOPS（Input Output per Second）... 1秒間にどれだけI/O（Input/Output:読み取り/書き込み）が行えるかを意味する性能指標のこと。

### Amazon S3
- Amazon S3（Simple Storage Service）は安価で耐久性が高く、保存容量が無制限のオブジェクトストレージサービス
- S3に保存されたオブジェクトにはURLが付与され、インターネットからアクセスできる

## Amazon Kinesis

## Amazon Athena
- S3上のデータに対して標準SQLを実行できるデータ分析サービス

## AWS Glue
- データソース（S3やDynamoDBなど）からデータを抽出し、変換・統合したデータをターゲットのデータベース（S3やRDSなど）へ格納するといった、データ分析における橋渡しの役割をするサービス
