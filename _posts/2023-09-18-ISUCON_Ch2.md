---
layout: post
title: "ISUCON_Ch2"
date: 2023-09-18
category: ISUCON
excerpt: ""
---
# Ch2. モニタリング

## TL;DR
- モニタリングとは、サーバーの状態を監視することである
- モニタリングには外形監視と内部監視の2種類がある

## Q
- モニタリングとは何か
- モニタリングはどのようにするのか
- node_exporterとは
- 外形監視と内部監視の違いは


## R
### モニタリングとは
- 提供しているサービスが想定通りに動いているかを随時チェック
  - **モニタリング = 継続的なテスト**

### メトリクスとは
- レイテンシなど、その時点の状態を示したもの
- メトリクスを時系列で保存しておくとトラブルシューティングに役立つ
  - メトリクスを収集しておけば、レイテンシが急激に超えたのか、徐々に増えていったのかがわかり、対処する時の手掛かりになる

### モニタリングはどのようにするのか
- アクセスログを集計
- レイテンシを記録
- 外形監視と内部監視

### 外形監視と内部監視の違いは
- 外形監視
  - ユーザーと同じ経路を使って監視
  - 外部からモニタリングデーモン(バックグラウンドで実行するアプリ)を利用して監視
  - HTTPリクエストを送信して目的のコードを返すかを確認する
  - シナリオテストを使ってよりユーザーの操作に近い動きでテストすることもある
- 内部監視
  - ユーザーが見えない部分のモニタリング
  - アプリケーションが実行されているサーバー上でモニタリングデーモンを立ち上げて、メトリクスの収集を行う
  - このデーモンのことを**エージェント**という
  - エージェントごとに収集するメトリクスは異なるため、複数のエージェントを起動することが多い
