---
layout: post
title: "Reliability"
date: 2023-08-21
category: AWS
excerpt: ""
---
# 信頼性のテスト対策
## 早引き
- **ストリーミングデータ**を**リアルタイム**で収集する -> Amazon Kinesis
- リクエスト発生時のみ処理を発生させたい -> Lambda
- スケーリングされるインスタンスでは、セッション情報をデータベースに保存してインスタンス間で共有すると安定的に動作する
  - インスタンスがスケールイン(減らされる)時にセッション情報が消えてしまうため 

## Amazon Kinesis
- ストリーミングデータ(継続的に生成されるデータ)をリアルタイムで収集・処理するサービス
  - 例)スマートフォンアプリなどでユーザーが生成するログや、証券取引所の株取引情報、SNSやオンラインゲームのデータなど
  - ストリーム処理　 ⇄ バッチ処理
- サンプリングや分析などの処理を通して、リアルタイムなトレンド情報をユーザーへフィードバックしたり、企業の経営戦略などに繋げることができる
- Kinesisではストリーミングデータを生成し送信するデバイスやサービスなどを「プロデューサー」、ストリーミングデータを読みだして処理する側を「コンシューマー」と呼ぶ

![k58587](https://github.com/IzmYuta/TIL/assets/104307371/0ac7c006-18a5-40a9-a6f0-d11d75dd70b3)

**Kinesis Data Streams**
- 外部から送信されるストリーミングデータを収集
- ストリーム上のデータは分析や機械学習などを行うアプリケーション(AWS Lambdaなど)がリアルタイムに読みだして処理
- ストリーミングデータを「データレコード」という単位で処理する
- データレコードには、データそのものに加えて「パーティションキー」「シーケンス番号」が含まれる
  - パーティションキー： どのシャード（後述）で処理するかを決めるもの。プロデューサー側で設定する
  - シーケンス番号： シャードごとに一意の番号。シャード内のデータレコードの順序性が保証される

![k58778](https://github.com/IzmYuta/TIL/assets/104307371/87bd3c6e-52ea-483f-9eef-1009fb2bddff)

**Kinesis Data Firehose**
- ストリーミングデータをAmazon S3（ストレージ）、Amazon Redshift（データベース）、Amazon OpenSearch Service（データ分析）などのサービスへ配信するサービス
  -ストリーミングデータは事前に設定されたデータ配信先へ配信される。中継するアプリケーションを独自に実装する必要はない。 

![kk58587](https://github.com/IzmYuta/TIL/assets/104307371/41732287-92d8-4714-8c6f-ad9833393a34)

**Kinesis Data Analytics**
- Kinesis上のストリーミングデータを処理し、可視化・分析できるサービス
  - 処理用のテンプレートが用
意されていたり、標準SQLのクエリが発行できたり、JavaやPythonなどのプログラミング言語がサポートされているなど、柔軟に処理を組み込むことができる
  - データをデータベースへ移行することなく処理することで、リアルタイムに結果を得ることができる

![kkk58587](https://github.com/IzmYuta/TIL/assets/104307371/1a67db9c-490e-4090-8824-d9e6dbeebd64)

**Kinesis Video Streams**
- カメラやビデオなどの動画（ビデオストリーム）を取り込むサービス。取り込んだ動画データはアプリケーションなどによって解析や加工、再生などを行うことができる。

![kkkk58587](https://github.com/IzmYuta/TIL/assets/104307371/0d243ced-18c3-4400-a88e-81ef28cd9296)


## AWS Lambda
- サーバーレスでプログラムのコードを実行できるサービス
  - サーバーレス：リクエスト発生時にだけプログラムが実行されるアーキテクチャ


## Amazon SQS
- フルマネージドのメッセージキューイングサービス
- サービス同士の橋渡しを担う
- ロングポーリングにすることで、APIコールがない時のコストを削減することができる

## AWS Glue
- データ分析向けのETLサービス
- ETL…データのExtract（抽出）・Transform（変換）・Load（書き出し）
